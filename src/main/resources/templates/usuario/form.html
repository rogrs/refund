<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="layout/base :: layout(~{::section})">

<section class="min-vh-100 d-flex align-items-center">

    <div class="container">

        <div class="row justify-content-center">
            <div class="col-12 col-sm-10 col-md-8 col-lg-6">

                <div class="card shadow-sm">

                    <div class="card-body p-4">

                        <h3 class="mb-4 text-center"
                            th:text="${modo == 'novo'
                                      ? 'Criar Usuário'
                                      : 'Editar Usuário'}">
                        </h3>

                        <form th:action="@{/usuarios}"
                              th:object="${usuario}"
                              method="post">

                            <!-- CSRF -->
                            <input type="hidden"
                                   th:name="${_csrf.parameterName}"
                                   th:value="${_csrf.token}">

                            <div class="row g-3">

                                <!-- Email -->
                                <div class="col-12">
                                    <label class="form-label">
                                        E-mail (login)
                                    </label>
                                    <input type="email"
                                           class="form-control form-control-lg"
                                           th:field="*{email}"
                                           th:readonly="${modo != 'novo'}"
                                           required>
                                </div>

                                <!-- Username -->
                                <div class="col-12">
                                    <label class="form-label">
                                        Usuário
                                    </label>
                                    <input type="text"
                                           class="form-control form-control-lg"
                                           th:field="*{username}">
                                </div>

                                <!-- Senha -->
                                <div class="col-12">
                                    <label class="form-label">
                                        Senha
                                        <small class="text-muted"
                                               th:if="${modo != 'novo'}">
                                            (preencher apenas se quiser alterar)
                                        </small>
                                    </label>
                                    <input type="password"
                                           class="form-control form-control-lg"
                                           name="passwordPlain"
                                           th:required="${modo == 'novo'}"
                                           minlength="6">
                                </div>

                                <!-- Idioma -->
                                <div class="col-12 col-md-6">
                                    <label class="form-label">
                                        Idioma
                                    </label>
                                    <select class="form-select form-select-lg"
                                            th:field="*{langKey}">
                                        <option value="pt-br">Português</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>

                                <!-- URL imagem -->
                                <div class="col-12 col-md-6">
                                    <label class="form-label">
                                        Imagem (URL)
                                    </label>
                                    <input type="url"
                                           class="form-control form-control-lg"
                                           th:field="*{imageUrl}">
                                </div>

                            </div>

                            <!-- Botão -->
                            <div class="d-grid mt-4">
                                <button class="btn btn-success btn-lg"
                                        th:text="${modo == 'novo'
                                                  ? 'Criar Usuário'
                                                  : 'Salvar Alterações'}">
                                </button>
                            </div>

                        </form>

                    </div>
                </div>

            </div>
        </div>

    </div>

</section>
</html>
