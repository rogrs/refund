<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="layout/base :: layout(~{::section})">

<section class="row justify-content-center">

    <div class="col-md-6">

        <h3 class="mb-3 text-center"
            th:text="${modo == 'novo' ? 'Criar Usuário' : 'Editar Usuário'}">
        </h3>

        <form th:action="@{/usuarios}"
              th:object="${usuario}"
              method="post">

            <input type="hidden"
                   th:name="${_csrf.parameterName}"
                   th:value="${_csrf.token}">


            <!-- Email -->
            <div class="mb-3">
                <label class="form-label">E-mail (login)</label>
                <input type="email"
                       class="form-control"
                       th:field="*{email}"
                       th:readonly="${modo != 'novo'}"
                       required>
            </div>

            <!-- Username -->
            <div class="mb-3">
                <label class="form-label">Usuário</label>
                <input type="text"
                       class="form-control"
                       th:field="*{username}">
            </div>

            <!-- Senha -->
            <div class="mb-3">
                <label class="form-label">
                    Senha
                    <small class="text-muted"
                           th:if="${modo != 'novo'}">
                        (preencher apenas se quiser alterar)
                    </small>
                </label>
                <input type="password"
                       class="form-control"
                       name="passwordPlain"
                       th:required="${modo == 'novo'}"
                       minlength="6">
            </div>

            <!-- Idioma -->
            <div class="mb-3">
                <label class="form-label">Idioma</label>
                <select class="form-select" th:field="*{langKey}">
                    <option value="pt-br">Português</option>
                    <option value="en">English</option>
                </select>
            </div>

            <!-- URL imagem -->
            <div class="mb-3">
                <label class="form-label">Imagem (URL)</label>
                <input type="url"
                       class="form-control"
                       th:field="*{imageUrl}">
            </div>

            <button class="btn btn-success w-100"
                    th:text="${modo == 'novo' ? 'Criar Usuário' : 'Salvar Alterações'}">
            </button>

        </form>

    </div>

</section>
</html>
