<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="layout/base :: layout(~{::section})">

<section class="container-fluid">

    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">

            <div class="card shadow-sm">

                <div class="card-header bg-primary text-white">
                    Cadastro de Reembolso
                </div>

                <div class="card-body">

                    <form th:action="@{/reembolsos}"
                          th:object="${reembolso}"
                          method="post"
                          enctype="multipart/form-data">

                        <!-- Mensagens globais -->
                        <div th:replace="fragments/messages :: messages"></div>

                        <input type="hidden" th:field="*{id}"/>

                        <div class="row g-3">

                            <!-- Paciente -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">Paciente</label>
                                <select class="form-select"
                                        th:field="*{paciente}"
                                        th:classappend="${#fields.hasErrors('paciente')} ? 'is-invalid'">
                                    <option value="">Selecione</option>
                                    <option th:each="p : ${pacientes}"
                                            th:value="${p}"
                                            th:text="${p}">
                                    </option>
                                </select>
                            </div>

                            <!-- Tipo Terapia -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">Tipo de Terapia</label>
                                <select class="form-select"
                                        th:field="*{tipoTerapia}"
                                        th:classappend="${#fields.hasErrors('tipoTerapia')} ? 'is-invalid'">
                                    <option value="">Selecione</option>
                                    <option th:each="t : ${tipos}"
                                            th:value="${t}"
                                            th:text="${t}">
                                    </option>
                                </select>
                            </div>

                            <!-- Número SR -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">Número SR</label>
                                <input type="text"
                                       class="form-control"
                                       th:field="*{numeroSr}"
                                       th:classappend="${#fields.hasErrors('numeroSr')} ? 'is-invalid'">
                            </div>

                            <!-- Nota Fiscal -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">Nota Fiscal</label>
                                <input type="text"
                                       class="form-control"
                                       th:field="*{notaFiscal}"
                                       th:classappend="${#fields.hasErrors('notaFiscal')} ? 'is-invalid'">
                            </div>

                            <!-- Valor Nota Fiscal -->
                            <div class="col-12 col-md-4">
                                <label class="form-label">Valor Nota Fiscal</label>
                                <input type="number"
                                       step="0.01"
                                       class="form-control"
                                       th:field="*{valorNotaFiscal}"
                                       th:classappend="${#fields.hasErrors('valorNotaFiscal')} ? 'is-invalid'">
                            </div>

                            <!-- Valor Reembolso -->
                            <div class="col-12 col-md-4">
                                <label class="form-label">Valor Reembolso</label>
                                <input type="number"
                                       step="0.01"
                                       class="form-control"
                                       th:field="*{valorReembolso}">
                            </div>

                            <!-- Data Pedido -->
                            <div class="col-12 col-md-4">
                                <label class="form-label">Data do Pedido</label>
                                <input type="date"
                                       class="form-control"
                                       th:field="*{dataPedido}"
                                       th:classappend="${#fields.hasErrors('dataPedido')} ? 'is-invalid'">
                            </div>

                            <!-- SR Cancelado -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">SR Cancelado</label>
                                <select class="form-select" th:field="*{srCancelado}">
                                    <option th:value="false">Não</option>
                                    <option th:value="true">Sim</option>
                                </select>
                            </div>

                            <!-- Protocolo -->
                            <div class="col-12 col-md-6">
                                <label class="form-label">Protocolo</label>
                                <input type="text"
                                       class="form-control"
                                       th:field="*{protocolo}">
                            </div>

                        </div>

                        <!-- Ações -->
                        <div class="d-flex flex-column flex-md-row justify-content-between gap-2 mt-4">

                            <a class="btn btn-outline-secondary"
                               th:href="@{/reembolsos}">
                                Voltar
                            </a>

                            <button class="btn btn-success">
                                Salvar
                            </button>

                        </div>

                    </form>

                </div>
            </div>

        </div>
    </div>

</section>
</html>
